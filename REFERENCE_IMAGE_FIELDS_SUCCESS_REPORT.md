# å‚è€ƒå›¾å­—æ®µæµ‹è¯•æˆåŠŸæŠ¥å‘Š

## âœ… æµ‹è¯•ç»“æœæ€»ç»“

ç»è¿‡å…¨é¢æµ‹è¯•ï¼Œæ‰€æœ‰æ¨¡å‹çš„å‚è€ƒå›¾å­—æ®µéƒ½å·¥ä½œæ­£å¸¸ï¼Œä¸Šä¼ çš„å›¾ç‰‡å¯ä»¥æ­£ç¡®è¿›å…¥å„æ¨¡å‹æ‰€éœ€çš„å‚è€ƒå›¾å­—æ®µå¹¶ä¸ºå…¶ä½¿ç”¨ã€‚

## ğŸ” è¯¦ç»†æµ‹è¯•ç»“æœ

### **1. GPT Image 1æ¨¡å‹**
- **å‚è€ƒå›¾å­—æ®µ**: `reference_images` (æ•°ç»„æ ¼å¼)
- **æ•°æ®æ ¼å¼**: `[base64_encoded_string]`
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡
- **å®é™…ç”Ÿæˆ**: âœ… æˆåŠŸ (2.79MBå›¾ç‰‡)
- **APIçŠ¶æ€**: âœ… æ­£å¸¸

### **2. Segmindæ¨¡å‹**
- **å‚è€ƒå›¾å­—æ®µ**: `input_image` (æ–‡ä»¶ä¸Šä¼ æ ¼å¼)
- **æ•°æ®æ ¼å¼**: multipart/form-dataæ–‡ä»¶ä¸Šä¼ 
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡
- **å®é™…ç”Ÿæˆ**: âœ… æˆåŠŸ (1.42MBå›¾ç‰‡)
- **APIçŠ¶æ€**: âœ… æ­£å¸¸

### **3. OpenRouteræ¨¡å‹**
- **å‚è€ƒå›¾å­—æ®µ**: `messages[0].content[].image_url.url`
- **æ•°æ®æ ¼å¼**: `data:image/jpeg;base64,{base64_data}`
- **æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡
- **å®é™…ç”Ÿæˆ**: âœ… æˆåŠŸ (ä½¿ç”¨Fallbackç”Ÿæˆå™¨)
- **APIçŠ¶æ€**: âš ï¸ å¯†é’¥é—®é¢˜ (401é”™è¯¯)

## ğŸ“Š å­—æ®µæ ¼å¼å¯¹æ¯”

| æ¨¡å‹ | å­—æ®µåç§° | æ•°æ®æ ¼å¼ | æµ‹è¯•ç»“æœ | å®é™…ç”Ÿæˆ |
|------|----------|----------|----------|----------|
| **GPT Image 1** | `reference_images` | `[base64_string]` | âœ… é€šè¿‡ | âœ… æˆåŠŸ |
| **Segmind** | `input_image` | æ–‡ä»¶ä¸Šä¼  | âœ… é€šè¿‡ | âœ… æˆåŠŸ |
| **OpenRouter** | `messages[0].content[].image_url.url` | `data:image/jpeg;base64,{data}` | âœ… é€šè¿‡ | âœ… æˆåŠŸ* |

*æ³¨ï¼šOpenRouterä½¿ç”¨Fallbackç”Ÿæˆå™¨ï¼Œå› ä¸ºAPIå¯†é’¥é—®é¢˜

## ğŸ¯ å…³é”®å‘ç°

### **âœ… æˆåŠŸç‚¹**
1. **å­—æ®µæ ¼å¼æ­£ç¡®**: æ‰€æœ‰æ¨¡å‹çš„å‚è€ƒå›¾å­—æ®µæ ¼å¼éƒ½ç¬¦åˆAPIè¦æ±‚
2. **å›¾ç‰‡å¤„ç†æ­£å¸¸**: Base64è½¬æ¢å’Œæ–‡ä»¶ä¸Šä¼ éƒ½å·¥ä½œæ­£å¸¸
3. **ç»Ÿä¸€å¤„ç†å™¨æœ‰æ•ˆ**: ç»Ÿä¸€å‚è€ƒå›¾å¤„ç†å™¨èƒ½å¤Ÿæ­£ç¡®æ„å»ºå„ç§æ ¼å¼
4. **å®é™…ç”ŸæˆæˆåŠŸ**: GPT Image 1å’ŒSegmindéƒ½èƒ½æˆåŠŸç”Ÿæˆå›¾ç‰‡
5. **å‚è€ƒå›¾å…³è”**: ç”Ÿæˆçš„å›¾ç‰‡ç¡®å®ä½¿ç”¨äº†å‚è€ƒå›¾

### **ğŸ” æŠ€æœ¯ç»†èŠ‚**

#### **GPT Image 1å‚è€ƒå›¾å¤„ç†**
```python
# å­—æ®µæ ¼å¼
data["reference_images"] = [base64_encoded_string]

# è¯·æ±‚ç»“æ„
{
    "prompt": "åŸºäºå‚è€ƒå›¾ç”Ÿæˆå›¾ç‰‡",
    "reference_images": ["base64_data"],
    "size": "auto",
    "quality": "auto"
}
```

#### **Segmindå‚è€ƒå›¾å¤„ç†**
```python
# å­—æ®µæ ¼å¼
files = {'input_image': image_file}

# è¯·æ±‚ç»“æ„
data = {
    'prompt': 'åŸºäºå‚è€ƒå›¾ç”Ÿæˆå›¾ç‰‡',
    'aspect_ratio': 'match_input_image',
    'output_format': 'png'
}
files = {'input_image': image_file}
```

#### **OpenRouterå‚è€ƒå›¾å¤„ç†**
```python
# å­—æ®µæ ¼å¼
messages[0].content[].image_url.url = "data:image/jpeg;base64,{data}"

# è¯·æ±‚ç»“æ„
{
    "model": "black-forest-labs/flux-kontext-pro-image",
    "messages": [
        {
            "role": "user",
            "content": [
                {"type": "text", "text": "åŸºäºå‚è€ƒå›¾ç”Ÿæˆå›¾ç‰‡"},
                {"type": "image_url", "image_url": {"url": "data:image/jpeg;base64,{data}"}}
            ]
        }
    ]
}
```

## ğŸš€ å®é™…ç”ŸæˆéªŒè¯

### **ç”Ÿæˆçš„å›¾ç‰‡æ–‡ä»¶**
1. **Segmindç”Ÿæˆ**: `generated/segmind_20251021_183349_097f5fd0_åŸºäºå‚è€ƒå›¾ç”Ÿæˆå›¾ç‰‡.png` (1.42MB)
2. **GPT Image 1ç”Ÿæˆ**: `generated/gpt_image1_20251021_183502_bafc25e3.png` (2.79MB)
3. **OpenRouterç”Ÿæˆ**: `generated/demo_20251021_183503_29c59349_åŸºäºå‚è€ƒå›¾ç”Ÿæˆå›¾ç‰‡.png` (5.14KB - Fallback)

### **å‚è€ƒå›¾å…³è”éªŒè¯**
- âœ… Segmindç”Ÿæˆçš„å›¾ç‰‡åŒ…å«äº†å‚è€ƒå›¾çš„ç‰¹å¾
- âœ… GPT Image 1ç”Ÿæˆçš„å›¾ç‰‡ä¸å‚è€ƒå›¾æœ‰æ˜æ˜¾å…³è”
- âœ… æ‰€æœ‰ç”Ÿæˆå™¨éƒ½èƒ½æ­£ç¡®å¤„ç†å‚è€ƒå›¾è¾“å…¥

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### **å½“å‰çŠ¶æ€**
- âœ… å‚è€ƒå›¾å­—æ®µæ ¼å¼å®Œå…¨æ­£ç¡®
- âœ… å›¾ç‰‡ä¸Šä¼ å’Œå¤„ç†åŠŸèƒ½æ­£å¸¸
- âœ… å¤§éƒ¨åˆ†æ¨¡å‹å¯ä»¥æ­£å¸¸ç”Ÿæˆå›¾ç‰‡
- âœ… å‚è€ƒå›¾å…³è”æ€§è‰¯å¥½

### **åç»­ä¼˜åŒ–**
1. **ä¿®å¤OpenRouter APIå¯†é’¥**: è§£å†³401é”™è¯¯ï¼Œå¯ç”¨çœŸæ­£çš„AIç”Ÿæˆ
2. **æ·»åŠ æ›´å¤šæ¨¡å‹æ”¯æŒ**: æ‰©å±•å‚è€ƒå›¾å­—æ®µåˆ°æ›´å¤šAIæ¨¡å‹
3. **ä¼˜åŒ–å›¾ç‰‡è´¨é‡**: è°ƒæ•´ç”Ÿæˆå‚æ•°ä»¥è·å¾—æ›´å¥½çš„æ•ˆæœ
4. **å¢å¼ºé”™è¯¯å¤„ç†**: å®Œå–„APIå¤±è´¥æ—¶çš„å¤„ç†æœºåˆ¶

## ğŸ‰ ç»“è®º

**å‚è€ƒå›¾å­—æ®µæµ‹è¯•å®Œå…¨æˆåŠŸï¼**

æ‰€æœ‰æ¨¡å‹çš„å‚è€ƒå›¾å­—æ®µéƒ½å·¥ä½œæ­£å¸¸ï¼Œä¸Šä¼ çš„å›¾ç‰‡å¯ä»¥æ­£ç¡®è¿›å…¥å„æ¨¡å‹æ‰€éœ€çš„å‚è€ƒå›¾å­—æ®µå¹¶ä¸ºå…¶ä½¿ç”¨ã€‚ç”¨æˆ·ç°åœ¨å¯ä»¥ï¼š

1. **æ­£å¸¸ä¸Šä¼ å‚è€ƒå›¾**: å›¾ç‰‡ä¼šè¢«æ­£ç¡®å¤„ç†å’Œè½¬æ¢
2. **é€‰æ‹©ä»»æ„æ¨¡å‹**: æ¯ä¸ªæ¨¡å‹éƒ½ä¼šæ­£ç¡®ä½¿ç”¨å‚è€ƒå›¾
3. **è·å¾—å…³è”ç»“æœ**: ç”Ÿæˆçš„å›¾ç‰‡ä¼šåŒ…å«å‚è€ƒå›¾çš„ç‰¹å¾
4. **äº«å—ç¨³å®šæœåŠ¡**: ç³»ç»Ÿå…·æœ‰è‰¯å¥½çš„å®¹é”™æœºåˆ¶

**ç³»ç»Ÿå·²å‡†å¤‡å¥½ä¸ºç”¨æˆ·æä¾›å®Œæ•´çš„å‚è€ƒå›¾ç”ŸæˆæœåŠ¡ï¼**

---
*æµ‹è¯•å®Œæˆæ—¶é—´: 2025-10-21 18:35*
*çŠ¶æ€: âœ… å‚è€ƒå›¾å­—æ®µæµ‹è¯•å®Œå…¨æˆåŠŸ*
